(this.webpackJsonpcrm=this.webpackJsonpcrm||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),l=a.n(r),i=(a(86),a(87),a(29)),c=a(15),d=a(12),s=a(58),u=a.n(s),f=a(144),h=a(150),m=a(145),p=a(147),b=a(139),v=a(64),g=a.n(v),S=function(e){var t=e.onSaveHandler;return o.a.createElement(p.a,{title:"Update Seller"},o.a.createElement(b.a,{style:{background:"#0E0D0F",width:"32px",height:"32px",color:"white"},onClick:t},o.a.createElement(g.a,null)))},E=a(65),y=a.n(E),x=function(e){var t=e.onClick;return o.a.createElement(p.a,{title:"Edit Sales"},o.a.createElement(b.a,{style:{background:"#A3C4B1",width:"32px",height:"32px",color:"white"},onClick:t},o.a.createElement(y.a,null)))},j=a(66),C=a.n(j),O=a(143),w=a(148),N=a(142),P=a(141),k=a(149),I=function(e){var t=e.addNode,a=B(),r=a.isShowModal,l=a.setIsShowModal,s=a.overlayHadnler,u=H().mousePosition,f=Object(n.useState)({x:u.x,y:u.y,name:"",totalSales:0,children:[],id:0,inDirectProfits:0,totalProfits:0}),h=Object(d.a)(f,2),p=h[0],b=h[1];Object(n.useEffect)((function(){r&&b((function(e){return Object(c.a)(Object(c.a)({},e),{},{x:u.x,y:u.y})}))}),[r]);var v=function(e){e.stopPropagation(),l(!1),s(),b({x:0,y:0,name:"",totalSales:0,children:[],id:0,inDirectProfits:0,totalProfits:0})},g=function(e){var t=e.target,a=t.id,n=t.value;b((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,n))}))};return o.a.createElement("div",null,o.a.createElement(w.a,{style:{zIndex:99999999999},open:r,onClose:v,"aria-labelledby":"form-dialog-title"},o.a.createElement(k.a,{id:"form-dialog-title"},"Add Seller"),o.a.createElement(P.a,null,o.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",required:!0,placeholder:"Type your Name",onChange:g,fullWidth:!0}),o.a.createElement(m.a,{margin:"dense",id:"totalSales",label:"Total Sales",type:"number",placeholder:"Type Your no. of Sales",fullWidth:!0,onChange:g})),o.a.createElement(N.a,null,o.a.createElement(O.a,{onClick:v,color:"primary"},"Cancel"),o.a.createElement(O.a,{onClick:function(e){e.stopPropagation(),p.name.trim()&&(p.id=Date.now(),t(p),v(e))},color:"primary"},"Add"))))},D=Object(f.a)((function(e){return{overlay:{display:"flex",width:"100%",height:"100%",background:"rgba(0,0,0,0.2)",position:"fixed",zIndex:200},mouseTail:{fontSize:"1.8rem",fontWeight:"bold",position:"absolute",top:function(e){var t=e.position;return t&&t.y-25},left:function(e){var t=e.position;return t&&t.x-17},cursor:"default"},appContainer:{minHeight:"100vh",width:"100%",height:"100%",overflow:"auto"}}})),T=Object(n.createContext)(null),M=function(e){var t=e.children,a=Object(n.useState)(!1),r=Object(d.a)(a,2),l=r[0],i=r[1],c=Object(n.useState)(!1),s=Object(d.a)(c,2),u=s[0],f=s[1],h=Object(n.useState)(null),m=Object(d.a)(h,2),p=m[0],b=m[1],v=Object(n.useState)(),g=Object(d.a)(v,2),S=g[0],E=g[1],y=Object(n.useState)({x:0,y:0,id:0,name:"root",totalSales:0,children:[],root:!0,inDirectProfits:0,totalProfits:0}),x=Object(d.a)(y,2),j=x[0],C=x[1],O=Object(n.useState)(0),w=Object(d.a)(O,2),N=w[0],P=w[1],k=Object(n.useState)({x:0,y:0}),M=Object(d.a)(k,2),B=M[0],H=M[1],R=D({position:B});return o.a.createElement(T.Provider,{value:{position:B,overlayHadnler:function(){i(!l)},isShowModal:u,setIsShowModal:f,isShowOverLay:l,updateRoot:C,setSelectedNode:b,selectedNode:p,initNode:S,selectedNodeToCalcChildrenProfitsID:N,setSelectedNodeToCalcChildrenProfitsID:P,root:j}},o.a.createElement(I,{addNode:function(e){var t=p||j;e.parentId=t.id,E(e)}}),o.a.createElement("div",{onMouseMove:function(e){H({x:e.clientX,y:e.clientY})},className:R.appContainer},l&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:R.overlay,onClick:function(e){e.stopPropagation(),f(!0)}}),o.a.createElement("div",{className:R.mouseTail},"+")),t))},B=function(){var e=Object(n.useContext)(T),t=e.overlayHadnler,a=e.setIsShowModal;return{overlayHadnler:t,isShowModal:e.isShowModal,setIsShowModal:a,isShowOverLay:e.isShowOverLay,updateRoot:e.updateRoot,setSelectedNode:e.setSelectedNode,selectedNode:e.selectedNode,initNode:e.initNode,selectedNodeToCalcChildrenProfitsID:e.selectedNodeToCalcChildrenProfitsID,setSelectedNodeToCalcChildrenProfitsID:e.setSelectedNodeToCalcChildrenProfitsID,root:e.root}},H=function(){return{mousePosition:Object(n.useContext)(T).position}},R=function(e){var t=e.node,a=B(),n=a.overlayHadnler,r=a.setSelectedNode;return o.a.createElement(p.a,{title:"Add Sub-Seller"},o.a.createElement(b.a,{onClick:function(e){n(),r(t)},style:{background:"#5CBF87",width:"32px",height:"32px",color:"white"}},o.a.createElement(C.a,null)))},z=Object(n.forwardRef)((function(e){var t=e.bottom,a=e.ref,n=t?{bottom:-10}:{top:-10};return o.a.createElement("div",{ref:a,style:Object(c.a)({width:"100%",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute"},n)},o.a.createElement("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"black"}}))})),L=.2,W=100,F="x",A="y",V="children",Y="totalSales",J="totalProfits",X="inDirectProfits",q=["Name","Total Sales","Direct Profits","Indirect Profits","Total Profits"],U={width:250,height:250},$=Object(f.a)((function(e){return{nodeRoot:{boxShadow:"0 0 8px 3px rgba(0,0,0,0.2)",height:"".concat(U.height,"px"),width:"".concat(U.width,"px"),position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"white",cursor:"grab",zIndex:700,"&:active":{cursor:"grabbing",zIndex:1e7}},totalSalesInput:{height:"40px"},controllersContainer:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:"100%"},controllersInnerContainer:{width:"50%",display:"flex",justifyContent:"space-around"},addSellerWrapper:{position:"absolute",right:-10,width:"20px",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},input:{height:"40px"},field:{height:"25px",width:"100%",display:"flex",alignItems:"center"}}})),G=function e(t){var a,r=t.node,l=$(),s=Object(n.useState)(!1),f=Object(d.a)(s,2),p=f[0],b=f[1],v=Object(n.useState)(Object(c.a)({},r)),g=Object(d.a)(v,2),E=g[0],y=g[1],j=Object(n.useState)(0),C=Object(d.a)(j,2),O=C[0],w=C[1],N=Object(n.useState)(r.totalSales*W),P=Object(d.a)(N,2),k=P[0],I=P[1],D=Object(n.useState)(0),T=Object(d.a)(D,2),M=T[0],H=T[1],q=B(),G=q.initNode,K=q.selectedNodeToCalcChildrenProfitsID,Q=q.setSelectedNodeToCalcChildrenProfitsID;Object(n.useEffect)((function(){I(r.totalSales*W)}),[r.totalSales]),Object(n.useEffect)((function(){w(r.inDirectProfits)}),[r.inDirectProfits]),Object(n.useEffect)((function(){H(k+O),_(r,J,k+O)}),[O,k]),Object(n.useEffect)((function(){_(r,V,G),Q(null===G||void 0===G?void 0:G.id)}),[G]),Object(n.useEffect)((function(){if(K===r.id){var e=r.children.reduce((function(e,t){return e+t.totalProfits*L}),0);w(e),Q(r.parentId),_(r,X,e)}}),[K]);var Z=function(){E.totalSales>=0&&b(!p)},_=function(e,t,a){switch(t){case V:(null===a||void 0===a?void 0:a.parentId)===e.id&&e.children.push(a);break;case J:"number"===typeof a&&(e[J]=a);break;case X:"number"===typeof a&&(e[X]=a);break;case F:e[F]=a;break;case A:e[A]=a;break;case Y:e[Y]=a}};return o.a.createElement(o.a.Fragment,null,!r.root&&o.a.createElement(u.a,{axis:"both",defaultPosition:{x:null===r||void 0===r?void 0:r.x,y:null===r||void 0===r?void 0:r.y},onDrag:function(e,t){_(r,F,t.lastX),_(r,A,t.lastY)}},o.a.createElement("div",{className:l.nodeRoot,onClick:function(e){e.stopPropagation()}},r.parentId?o.a.createElement(z,null):"",o.a.createElement(h.a,{style:{paddingTop:"1rem"}},E.name,o.a.createElement(m.a,{style:{marginTop:"1rem"},disabled:!p,variant:"outlined",id:"totalSales",type:"number",label:"Total Sales",placeholder:"Type no. of sales",value:null===E||void 0===E?void 0:E.totalSales,onBlur:function(){Z()},inputProps:{min:0,classes:{input:l.input},style:{height:"40px",padding:"0 0 0 0.5rem"}},onChange:function(e){var t=e.target,a=t.id,n=t.value;y((function(e){return Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,n))})),Q(r.id),I(Number(n)*W),_(r,Y,n)}}),o.a.createElement("div",{style:{flex:2}},o.a.createElement("div",{className:l.field},"Direct Profits : ".concat(k.toLocaleString("en"))),o.a.createElement("div",{className:l.field},"In-Direct Profits : ".concat(O.toLocaleString("en"))),o.a.createElement("div",{style:{fontWeight:"bold"},className:l.field},"Total Profits : ".concat(Number(M).toLocaleString("en"))))),o.a.createElement("div",{className:l.controllersContainer},o.a.createElement("div",{className:l.controllersInnerContainer},p&&o.a.createElement(S,{onSaveHandler:Z})||o.a.createElement(x,{onClick:function(){b(!p)}}),o.a.createElement(R,{node:E}))),o.a.createElement(z,{bottom:!0}))),null===r||void 0===r||null===(a=r.children)||void 0===a?void 0:a.map((function(t){return o.a.createElement(o.a.Fragment,null,r.root?"":o.a.createElement("svg",{viewBox:"100% 100%",style:{height:"100%",width:"100%",position:"fixed",zIndex:1,top:0,left:0}},o.a.createElement("path",{d:"M".concat((null===r||void 0===r?void 0:r.x)+U.width/2,",").concat(r.y+U.height," L").concat((null===t||void 0===t?void 0:t.x)+U.width/2,",").concat(t.y),style:{stroke:"black",strokeWidth:2,fill:"none"}})),o.a.createElement(e,{node:t,onNodeChange:function(e,t,a){return _(e,t,a)}}))})))},K=a(47),Q=a.n(K),Z=a(67),_=a(69),ee=a.n(_),te=a(68),ae=function(e){var t=e.fetchCSVData,a=Object(n.useState)([[]]),r=Object(d.a)(a,2),l=r[0],i=r[1],c=function(){var e=Object(Z.a)(Q.a.mark((function e(){var a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:a=e.sent,i(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(te.CSVLink,{data:l,onClick:c},o.a.createElement(p.a,{title:"Export to CSV"},o.a.createElement(b.a,{style:{background:"#2912B0",height:"64px",width:"64px",marginRight:"0.5rem",color:"white"}},o.a.createElement(ee.a,{style:{fontSize:"2rem"}}))))},ne=Object(f.a)((function(e){return{home:{height:"100%",width:"100%",position:"relative"},addSellerButton:{position:"fixed",top:30,right:30,zIndex:99999}}})),oe=function(){var e=B(),t=e.overlayHadnler,a=e.root,n=e.updateRoot,r=e.setSelectedNode,l=e.setSelectedNodeToCalcChildrenProfitsID,i=ne();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:i.home},o.a.createElement("div",{className:i.addSellerButton},o.a.createElement(ae,{fetchCSVData:function(){var e=[q];try{return function t(a){a.children.forEach((function(a){var n=[a.name,a.totalSales,a.totalSales*W,a.inDirectProfits,a.totalProfits];e.push(n),a.children.length&&t(a)}))}(a),e}catch(t){return t}}}),o.a.createElement(O.a,{style:{background:"orange",width:"80px"},onClick:function(e){e.stopPropagation(),console.log(a),l(a.id),r(a),t()}},"Add Seller")),o.a.createElement(G,{node:a,onNodeChange:function(e){return n(e)}})))};var re=function(){return o.a.createElement(M,null,o.a.createElement("div",{className:"App"},o.a.createElement(oe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(101)},86:function(e,t,a){},87:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.74ef5be2.chunk.js.map